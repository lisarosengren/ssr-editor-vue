import{_ as u,n as c,r as f,i as p,c as l,o as a,a as t,b as D,w as d,v as w,d as v,e as y,F as b,f as S,g as $}from"./index-yja32Lui.js";const V={emits:["doc-created"],setup(){const o=p("userState"),e=f(null);return{userState:o,formRef:e}},data(){return{newDocData:{title:"",type:null},err:!1}},methods:{async onSubmit(){const o=this.formRef;if(!o.checkValidity()){o.reportValidity();return}try{const s=(await c(this.newDocData)).insertedId;this.$emit("doc-created"),this.$router.push(`/${s}/${this.newDocData.type}`)}catch(e){console.error(e),this.err=!0}}}},N={class:"form"},k={key:0};function x(o,e,s,m,n,i){return a(),l(b,null,[t("form",{ref:"formRef",onSubmit:e[2]||(e[2]=y((...r)=>i.onSubmit&&i.onSubmit(...r),["prevent"]))},[t("div",N,[e[4]||(e[4]=t("label",{for:"title"},"Titel: ",-1)),d(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=r=>n.newDocData.title=r),id:"title",required:""},null,512),[[w,n.newDocData.title]]),e[5]||(e[5]=t("br",null,null,-1)),e[6]||(e[6]=t("label",{for:"type"},"Dokumenttyp: ",-1)),d(t("select",{"onUpdate:modelValue":e[1]||(e[1]=r=>n.newDocData.type=r),id:"type",required:""},[...e[3]||(e[3]=[t("option",{disabled:"",value:""},"Välj:",-1),t("option",null,"text",-1),t("option",null,"code",-1)])],512),[[v,n.newDocData.type]])]),e[7]||(e[7]=t("div",null,[t("input",{class:"button",type:"submit",name:"doit",value:"Spara"})],-1))],544),n.err?(a(),l("div",k,[...e[8]||(e[8]=[t("div",{id:"hide",class:"err"},[t("p",null,"Något har gått fel...")],-1)])])):D("",!0)],64)}const g=u(V,[["render",x],["__scopeId","data-v-88b7e443"]]),B={emits:["doc-created"],setup(){return{userState:p("userState")}},components:{NewDoc:g}},C={class:"editor"};function M(o,e,s,m,n,i){const r=$("NewDoc");return a(),l("div",C,[e[1]||(e[1]=t("h1",null,"Skapa dokument",-1)),S(r,{onDocCreated:e[0]||(e[0]=R=>o.$emit("doc-created"))})])}const q=u(B,[["render",M]]);export{q as default};
